CREATE TABLE bio_historia_fisiologica (
    id SERIAL PRIMARY KEY, -- Identificador único
    id_paciente INT NOT NULL, -- Chave estrangeira para bio_pacientes(id)
    nascimento TEXT, -- Tipo de parto/ onde nasceu
    desenvolvimento TEXT, --Atraso no desenvolvimento
    menstruacao TEXT, --Primeira menstruação/ como é
    primeira_relacao TEXT, --Primeira relação sexual
    menopausa TEXT, --Menopausa
    gestacoes INTEGER DEFAULT 0, --Número de Gestações
    qtd_filhos INTEGER DEFAULT 0, --Quantos filhos
    qtd_abortos INTEGER DEFAULT 0, --Teve aborto?
    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP, --Data de criação do registro
    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP --Data de atualização do registro
);

ALTER TABLE bio_historia_fisiologica
ADD CONSTRAINT fk_id_paciente
FOREIGN KEY (id_paciente)
REFERENCES bio_pacientes (id)
ON DELETE CASCADE;

CREATE TRIGGER set_atualizado_em
BEFORE UPDATE ON bio_historia_fisiologica
FOR EACH ROW
EXECUTE FUNCTION update_atualizado_em_column();